{
  "name": "avconv",
  "version": "2.0.0",
  "description": "Simply spawns an avconv process with any parameters and *streams* the result + conversion progress to you. Very small, fast, clean and does only this.",
  "main": "avconv.js",
  "author": {
    "name": "Michael Heuberger",
    "email": "michael.heuberger@binarykitchen.com"
  },
  "contributors": [
    {
      "name": "Michael Heuberger",
      "email": "michael.heuberger@binarykitchen.com"
    },
    {
      "name": "Jelle De Loecker",
      "email": "jelle@kipdola.be"
    }
  ],
  "keywords": [
    "avconv",
    "video conversion",
    "video encoding"
  ],
  "devDependencies": {
    "nodeunit": "^0.9.0"
  },
  "dependencies": {},
  "engines": {
    "node": "~0.10.20"
  },
  "scripts": {
    "test": "nodeunit tests/basics.js"
  },
  "repository": {
    "type": "git",
    "url": "https://github.com/binarykitchen/avconv.git"
  },
  "directories": {
    "test": "tests"
  },
  "license": "MIT",
  "readmeFilename": "README.md",
  "readme": "# avconv\n\n[![Build Status](https://travis-ci.org/binarykitchen/avconv.png?branch=master)](https://travis-ci.org/binarykitchen/avconv)\n\nSimply spawns an avconv process with any parameters and *streams* the results to you (meta data + conversion progress). Very small, fast, clean and does only this:\n\n```javascript\n// Anything you want\nvar params = [ ... ];\n\n// Returns a duplex stream\nvar stream = avconv(params);\n\n// Here you know it's done\nstream.on('exit', function(...) {\n    ...\n})\n```\n\nIt also can keep you informed about the progress by emitting events. That's a very unique function of this module. Link that with an UI and it will look flash. See `progress` event below.\n\n## Support\nIf you've found avconv useful and would like to contribute to its continued development & support, please feel free to send a donation of any size - it would be greatly appreciated!\n\n[![Support via Gittip](https://rawgithub.com/chris---/Donation-Badges/master/gittip.jpeg)](https://www.gittip.com/binarykitchen)\n\n## Installation\n\nTo install avconv, use [npm](http://github.com/isaacs/npm):\n\n    $ npm install avconv\n\nThen in your node.js app, get reference to the function like that:\n\n```javascript\nvar avconv = require('avconv');\n```\n\n## Quick examples\n\n### Encode an avi video out of images\n\n```javascript\nvar params = [\n    '-f', 'image2',\n    '-loglevel', 'info',\n    '-i', '/tmp/images/',\n    '-y', '/tmp/output.avi'\n];\n\n// Returns a duplex stream\nvar stream = avconv(params);\n\n// Anytime avconv outputs any information, forward these results to process.stdout\nstream.on('message', function(data) {\n    process.stdout.write(data);\n})\n```\n\n* Avconv consultation is not subject of this module. If you need help with parameters, have a look at http://libav.org/avconv.html\n* Same goes with node streams. You can do anything with them you want. Pipe them or listen to events. Easy.\n* But if your're smart, then go, have a look at the unit tests. They contain some nice examples.\n\n### Using streams & pipes\n\n```javascript\nvar params = [\n    '-i', 'pipe:0', // Tell avconv to expect an input stream (via its stdin)\n    '-f', 's16le',  // We only want audio back\n    '-acodec',\n    'pcm_s16le',\n    'pipe:1'        // Tell avconv to stream the converted data (via its stdout)\n];\n\n// Get the duplex stream\nvar stream = avconv(params);\n\n// Pipe a file into avconv\nfs.createReadStream('video.mp4').pipe(stream);\n\n// Pipe the audio output to a new file\nstream.pipe(fs.createWriteStream('audio.raw'));\n```\n\n### How to watch for results (progress, meta data, output, errors, exit code)?\n\nIf you want to watch for errors or for exit codes from the avconv process then you should add event listeners like that:\n\n```\nvar stream = avconv(params);\n\nstream.on('message', function(data) {\n    process.stdout.write(data);\n\n    /*\n    This also would work because data is utf8 encoded:\n    console.log(data);\n    */\n});\n\nstream.on('progress', function(progress) {\n    /*\n    Progress is a floating number between 0 ... 1 that keeps you\n    informed about the current avconv conversion process.\n    */\n});\n\nstream.on('meta', function(meta) {\n    /*\n    Meta is a json. Here is an example:\n\n        meta = {\n            video: {\n                track:  '0.0',\n                codec:  'libvpx',\n                format: 'yuv420p',\n                width:  320,\n                height: 240\n            }\n        };\n\n    Currently it returns meta data about the first video track only. If you want more, drop an issue.\n    */\n});\n\nstream.on('error', function(data) {\n    process.stderr.write(data);\n});\n\nstream.on('data', function(data) {\n    /*\n    When you tell avconv to output to 'pipe:1',\n    this is where the data will end up (as a buffer)\n    */\n});\n\n// You can also pipe the output\nstream.pipe(fs.createWriteStream('video.mp4'));\n\nstream.once('exit', function(exitCode, signal) {\n    /*\n    Here you knows the avconv process is finished\n    */\n});\n```\n\nAn exit code of 0 (zero) means there was no problem. An exit code of 127 means the program avconv could not be found. I recommend you to use a switch block to deal with various exit codes.\n\nDepending on the log level you have passed onto the avconv process, the output might contain any useful information. Beware that warnings or errors from within the avconv process are still shown as normal output in the `data` event.\n\nWhereas errors from the stream are rarely filled (`error` event). They happen only when there was an unix-related problem about spawning processes, memory blabbah ...\n\n## API\n\n### stream = avconv(params)\n\nAvconv spawns a new avconv process with any given parameters. It does not validate the parameters nor mess with the results. That's all up to you. You would see avconv complaining about bad parameters in the `data` event anyway. So:\n\n__one argument__\n\n* params - any array list with string arguments as values (see examples)\n\n__one return value__\n\n* stream - a readable stream where you can attach well-known events like:\n    * `.on('message', function(data) {...})` - a chunk of data with useful information, depending on the log level. Any warnings or errors from avconv are there too.\n    * `.on('progress', function(progress) {...})` - a floating number, 0 means conversion progress is at 0%, 1 is 100% and means, it's done. Very useful if you want to show the conversion progress on an user interface.\n    * `.on('meta', function(meta) {...})` - returns video meta data in json.\n    * `.on('data', function(data) {...})` - a buffer object with converted data (if outputting to pipe:1)\n    * `.on('error', function(data) {...})` - rarely used. Would contain issues related to the OS itself.\n    * `.once('exit', function(exitCode, signal) {...})` - for the exit code any integer where 0 means OK. Anything above 0 indicates a problem (exit code). The signal tells how the process ended, i.E. can be a SIGTERM you killed it with `stream.kill()`. If it's null, then it ended normally.\n\nAnd of course, you can `.kill()` the stream, if you want to abort in the middle. It will kill the process in cold blood and delegate an `exit` event to avconv's internals.\n\n## Changelog\n\nSee History.md\n\n## Contributors\n\n* Michael Heuberger <michael.heuberger@binarykitchen.com>\n* Jelle De Loecker <jelle@kipdola.be>\n* You?\n\n## License\n\nMIT\n",
  "bugs": {
    "url": "https://github.com/binarykitchen/avconv/issues"
  },
  "_id": "avconv@2.0.0",
  "dist": {
    "shasum": "9a2982f8f932210e8b452001b2257903f2e9a936"
  },
  "_from": "avconv@",
  "_resolved": "https://registry.npmjs.org/avconv/-/avconv-2.0.0.tgz"
}
